-*- mode: org -*-
* Introduction
This README documents setting up Arch Linux on an virpus.com openvz server
* TODO IN PROGRESS Monday, November 12, 2012
** Upgrade glibc
#+begin_src perl
system("mv -v lib lib-hide");
symlink "usr/lib", lib;
#+end_src

1. [X] pacman --sync --refresh
2. [X] To facilitate upgrading glibc 2.15, add [openvz-glibc-2.15-tdw] repository to [[/etc/pacman.conf]]
   [[file://ssh:root@shilohsystem.com:/etc/pacman.conf]]
   #+begin_src sh
   [openvz-glibc-2.15-tdw]
   Server = http://troywill.info/openvz-tdw/i686
   #+end_src
3. [X] pacman --sync --refresh
4. [X] pacman --sync binutils gcc-libs gcc
5. [X] pacman --sync abs
6. [X] Run abs
   #+begin_example
   [root@shilohsystem ~]# abs
    ==> Downloading tarballs...
    ==> core...
    ==> extra...
    ==> community...
   #+end_example
7. [X] useradd --create-home --gid users --shell /bin/bash troy
8. [X] su -c troy
9. [ ] 
* New Install FAIL!!!!( Monday, November 12, 2012 ) shilohystem.com => 50.115.161.205
1. [X] Install Arch Linux ([[http://manage.virpus.com/login.php]])
2. [X] Set root password
3. [X] pacman --sync --refresh
4. [X] To facilitate upgrading glibc 2.15, add [openvz-glibc-2.15-tdw] repository to [[/etc/pacman.conf]]
   [[file://ssh:root@shilohsystem.com:/etc/pacman.conf]]
   #+begin_src sh
   [openvz-glibc-2.15-tdw]
   Server = http://troywill.info/openvz-tdw/i686
   #+end_src
 
5. [X] pacman --sync --sysupgrade
   #+begin_example
:: The following packages should be upgraded first :
    pacman
:: Do you want to cancel the current operation
:: and upgrade these packages now? [Y/n]
   #+end_example
6. [X] To facilitate upgrading glibc 2.16, add [openvz-glibc-2.16-tdw] repository to [[/etc/pacman.conf]]
   [[file://ssh:root@shilohsystem.com:/etc/pacman.conf]]
   #+begin_src sh
   [openvz-glibc-2.16-tdw]
   Server = http://troywill.info/openvz-tdw/i686
   #+end_src
7. [X] Run `pacman --sync --refresh` to refresh package lists
8. [X] Run `pacman --sync --force pacman` to upgrade pacman
   - Explanation: pacman requires glibc 2.15, which will trigger a file conflict warning. Thus we use the --force flag.
   This is what I get with `pacman --sync pacman`
   #+begin_example
   error: failed to commit transaction (conflicting files)
   glibc: /lib exists in filesystem
   glibc: /usr/bin/tzselect exists in filesystem
   glibc: /usr/sbin/zdump exists in filesystem
   glibc: /usr/sbin/zic exists in filesystem
   Errors occurred, no packages were upgraded.
   #+end_example
   From several months ago:
   #+begin_example
   Targets (19): linux-api-headers-3.4.4-1  glibc-2.15-20120425  xz-5.0.4-1  libarchive-3.0.4-1  run-parts-4.3.2-1  ca-certificates-20120623-1  
            libssh2-1.4.2-1  curl-7.26.0-1  pth-2.0.7-4  libksba-1.2.0-1  libassuan-2.0.3-1  pinentry-0.8.1-4  libsasl-2.1.23-9  
            libldap-2.4.31-4  dirmngr-1.1.0-4  gnupg-2.0.19-2  gpgme-1.3.1-4  archlinux-keyring-20120622-1  pacman-4.0.3-3  
   #+end_example
   Today:
   #+begin_example
[root@shilohsystem ~]# pacman --sync --force pacman
resolving dependencies...
looking for inter-conflicts...

Targets (19): linux-api-headers-3.6.3-1  glibc-2.16.0-121112  xz-5.0.4-1  libarchive-3.0.4-2  run-parts-4.3.4-1  
              ca-certificates-20121105-1  libssh2-1.4.2-1  curl-7.28.0-1  pth-2.0.7-4  libksba-1.2.0-1  libassuan-2.0.3-1  
              pinentry-0.8.2-1  libsasl-2.1.23-9  libldap-2.4.33-1  dirmngr-1.1.0-4  gnupg-2.0.19-2  gpgme-1.3.1-4  
              archlinux-keyring-20121113-1  pacman-4.0.3-3  

Total Download Size:    0.00 MB
Total Installed Size:   61.54 MB

Proceed with installation? [Y/n] 
   #+end_example
   Results in a broken system ;-(.
   #+begin_example
checking package integrity...
( 1/19) upgrading linux-api-headers                 [#################################################################################] 100%
( 2/19) upgrading glibc                             [#################################################################################] 100%
warning: /etc/locale.gen installed as /etc/locale.gen.pacnew
error: extract: not overwriting dir with file lib
error: problem occurred while upgrading glibc
error: command failed to execute correctly
( 3/19) upgrading xz                                [#################################################################################] 100%
( 4/19) upgrading libarchive                        [#################################################################################] 100%
( 5/19) installing run-parts                        [#################################################################################] 100%
( 6/19) installing ca-certificates                  [#################################################################################] 100%
error: command failed to execute correctly
( 7/19) installing libssh2                          [#################################################################################] 100%
( 8/19) installing curl                             [#################################################################################] 100%
( 9/19) installing pth                              [#################################################################################] 100%
(10/19) installing libksba                          [#################################################################################] 100%
error: command failed to execute correctly
(11/19) installing libassuan                        [#################################################################################] 100%
error: command failed to execute correctly
(12/19) installing pinentry                         [#################################################################################] 100%
error: command failed to execute correctly
Optional dependencies for pinentry
    gtk2: for gtk2 backend
    qt: for qt4 backend
(13/19) installing libsasl                          [#################################################################################] 100%
(14/19) installing libldap                          [#################################################################################] 100%
(15/19) installing dirmngr                          [#################################################################################] 100%
error: command failed to execute correctly
(16/19) installing gnupg                            [#################################################################################] 100%
error: command failed to execute correctly
Optional dependencies for gnupg
    curl: gpg2keys_curl
    libldap: gpg2keys_ldap
    libusb-compat: scdaemon
    texinfo: documentation
(17/19) installing gpgme                            [#################################################################################] 100%
error: command failed to execute correctly
(18/19) installing archlinux-keyring                [#################################################################################] 100%
error: command failed to execute correctly
(19/19) upgrading pacman                            [#################################################################################] 100%
warning: /etc/pacman.conf installed as /etc/pacman.conf.pacnew
error: command failed to execute correctly
error: command failed to execute correctly
   #+end_example
9. [X] Run `pacman-db-upgrade` to update the pacman database format
10. [X] Copy /etc/pacman.conf.pacnew to /etc/pacman.conf
    #+begin_src sh
    cp /etc/pacman.conf.pacnew /etc/pacman.conf
    #+end_src
11. [X] Run  `pacman-key --init; pacman-key --populate archlinux`
	to import the data required by pacman for package verification.
	See: https://www.archlinux.org/news/having-pacman-verify-packages
12. [X] Edit pacman.conf to temporarily turn off package signing
    Explanation: pacman will crash with package signing without upgrading an (not yet known) library with
    this error: `pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno`
    [[file://ssh:root@shilohsystem.com:/etc/pacman.conf]]
    #+begin_example
    # SigLevel = PackageRequired
    SigLevel = Never
    #+end_example
13. [X] Add [openvz-tdw] repository /etc/pacman.conf
    [[file://ssh:root@shilohsystem.com:/etc/pacman.conf]]
    #+begin_src sh
[openvz-tdw]
Server = http://packages.shilohsystem.com/openvz-tdw/$arch
    #+end_src
14. [X] Run `pacman --sync --refresh` again to refresh package lists
15. [X] Run `pacman --sync --force initscripts` to upgrade the initscripts package
    ( See https://www.archlinux.org/news/initscripts-update-manual-intervention-required/ for details )
16. [X] Run `pacman --sync --force filesystem` to upgrade the filesystem package
	( See http://www.archlinux.org/news/filesystem-upgrade-manual-intervention-required/ for details )
    NOTE 1: inaccurate error message => `error: extract: not overwriting dir with file var/run
          error: problem occurred while upgrading filesystem
          error: could not commit transaction
          error: failed to commit transaction (transaction aborted)
          Errors occurred, no packages were upgraded.`
	  In fact, the package was upgraded, which can be shown with pacman -Q filesystem
    NOTE 2: `pacman --sync --force filesystem` may hang. Wait a while, kill with Ctrl-C if neccessary,
          and rerun pacman --sync --force filesystem
17. [X] Run `pacman --sync --force krb5`
18. [X] Run `pacman --sync --nodeps binutils gcc-libs` ( See [[https://wiki.archlinux.org/index.php/DeveloperWiki:usrlib]]un )
19. [ ] Run `pacman --sync --sysupgrade --ignore glibc`
    - :: Replace libusb with core/libusbx? [Y/n]
    - :: Replace mailx with core/heirloom-mailx? [Y/n]
    - :: Replace procps with core/procps-ng? [Y/n]
    - :: Replace sqlite3 with extra/sqlite? [Y/n]
    error: failed to commit transaction (conflicting files)
    glibc: /lib exists in filesystem
20. [ ] Run `pacman --sync util-linux`
21. [ ] Run `pacman --sync --sysupgrade`
22. [ ] Run `pacman --sync inetutils`
23. [ ] Run `pacman --sync base-devel sudo emacs-nox rsync git`
24. [ ] Run `adduser NEWUSER`
25. [ ] Reboot
* New Install ( Friday, July 20, 2012 )
1. [X] Install Arch Linux ([[http://manage.virpus.com/login.php]])
2. [X] Set root password
3. [X] To facilitate upgrading glibc 2.15, add [openvz-glibc-2.15-tdw] repository to [[/etc/pacman.conf]]
   [[file://ssh:root@troywill.com:/etc/pacman.conf]]
   #+begin_src sh
   [openvz-glibc-2.15-tdw]
   Server = http://packages.shilohsystem.com/openvz-tdw/i686
   #+end_src
4. [X] Run `pacman --sync --refresh` to refresh package lists
5. [X] Run `pacman --sync --force pacman` to upgrade pacman
   - Explanation: pacman requires glibc 2.15, which will trigger a file conflict warning. Thus we use the --force flag.
   - Targets (19): linux-api-headers-3.4.4-1  glibc-2.15-20120425  xz-5.0.4-1  libarchive-3.0.4-1  run-parts-4.3.2-1  ca-certificates-20120623-1  
              libssh2-1.4.2-1  curl-7.26.0-1  pth-2.0.7-4  libksba-1.2.0-1  libassuan-2.0.3-1  pinentry-0.8.1-4  libsasl-2.1.23-9  
              libldap-2.4.31-4  dirmngr-1.1.0-4  gnupg-2.0.19-2  gpgme-1.3.1-4  archlinux-keyring-20120622-1  pacman-4.0.3-3  
6. [X] Run `pacman-db-upgrade` to update the pacman database format
7. [X] Copy /etc/pacman.conf.pacnew to /etc/pacman.conf
8. [X] Run  `pacman-key --init; pacman-key --populate archlinux`
       to import the data required by pacman for package verification.
       See: https://www.archlinux.org/news/having-pacman-verify-packages
9. [X] Edit pacman.conf to temporarily turn off package signing
   Explanation: pacman will crash with package signing without upgrading an (not yet known) library with
   this error: `pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno`
   [[file://ssh:root@troywill.com:/etc/pacman.conf]]
10. [X] Add [openvz-tdw] repository /etc/pacman.conf
    [[file://ssh:root@troywill.com:/etc/pacman.conf]]
    #+begin_src sh
[openvz-tdw]
Server = http://packages.shilohsystem.com/openvz-tdw/$arch
    #+end_src
11. [X] Run `pacman --sync --refresh` again to refresh package lists
12. [X] Run `pacman --sync --force initscripts` to upgrade the initscripts package
    ( See https://www.archlinux.org/news/initscripts-update-manual-intervention-required/ for details )
13. [X] Run `pacman --sync --force filesystem` to upgrade the filesystem package
	( See http://www.archlinux.org/news/filesystem-upgrade-manual-intervention-required/ for details )
    NOTE 1: inaccurate error message => `error: extract: not overwriting dir with file var/run
          error: problem occurred while upgrading filesystem
          error: could not commit transaction
          error: failed to commit transaction (transaction aborted)
          Errors occurred, no packages were upgraded.`
	  In fact, the package was upgraded, which can be shown with pacman -Q filesystem
    NOTE 2: `pacman --sync --force filesystem` may hang. Wait a while, kill with Ctrl-C if neccessary,
          and rerun pacman --sync --force filesystem
14. [X] Run `pacman --sync --force krb5`
15. [X] Run `pacman -Sd binutils gcc-libs` ( See [[https://wiki.archlinux.org/index.php/DeveloperWiki:usrlib]]un )
16. [X] Run `pacman -Syu --ignore glibc`
    - :: Replace libusb with core/libusbx? [Y/n]
    - :: Replace mailx with core/heirloom-mailx? [Y/n]
    - :: Replace procps with core/procps-ng? [Y/n]
    - :: Replace sqlite3 with extra/sqlite? [Y/n]
    error: failed to commit transaction (conflicting files)
    glibc: /lib exists in filesystem
17. [X] Run `pacman --sync util-linux`
18. [X] Run `pacman --sync --sysupgrade`
19. [X] Run `pacman --sync inetutils`
20. [X] Run `pacman --sync base-devel sudo emacs-nox rsync git`
21. [X] Run `adduser NEWUSER`
22. [X] Reboot
* New Purchase and Install ( Wednesday, July 18, 2012 )
1. [X] View [[http://virpus.com]]
2. [X] Choose "Learn More" button for Openvz vps hosting [[http://virpus.com/budget-vps/]]
   ( RAM = 512 MB, Bandwidth = 1000 GB, Annual $3.00/mo )
3. [X] Choose "order now"
   | Option        | Value                    | Note                                           |
   |---------------+--------------------------+------------------------------------------------|
   | Hostname      | usahealthscience.com     |                                                |
   | NS1 Prefix    | ns1.usahealthscience.com |                                                |
   | Location      | Los Angeles              |                                                |
   | OS            | CentOS                   | Plenty more available within VPS control panel |
   | Control Panel | No, thanks               | DirectAdmin $5.00, cPanel $10.00               |
   | Management    | Unmanaged                | Fully Managed $10.00 USD                       |
4. [X] "Add to Cart"
5. [X] Install Arch Linux ([[http://manage.virpus.com/login.php]])
6. [X] Set root password
7. [X] To facilitate upgrading glibc 2.15, add [openvz-glibc-2.15-tdw] repository to [[/etc/pacman.conf]]
   [[file://ssh:root@50.115.167.172:/etc/pacman.conf]]
   #+begin_src sh
   [openvz-glibc-2.15-tdw]
   Server = http://packages.shilohsystem.com/openvz-tdw/i686
   #+end_src
8. [X] Run `pacman --sync --refresh` to refresh package lists
9. [X] Run `pacman --sync --force pacman` to upgrade pacman
   - Explanation: pacman requires glibc 2.15, which will trigger a file conflict warning. Thus we use the --force flag.
   - Targets (19): linux-api-headers-3.4.4-1  glibc-2.15-20120425  xz-5.0.4-1  libarchive-3.0.4-1  run-parts-4.3.2-1  ca-certificates-20120623-1  
              libssh2-1.4.2-1  curl-7.26.0-1  pth-2.0.7-4  libksba-1.2.0-1  libassuan-2.0.3-1  pinentry-0.8.1-4  libsasl-2.1.23-9  
              libldap-2.4.31-4  dirmngr-1.1.0-4  gnupg-2.0.19-2  gpgme-1.3.1-4  archlinux-keyring-20120622-1  pacman-4.0.3-3  
10. [X] Run `pacman-db-upgrade` to update the pacman database format
11. [X] Copy /etc/pacman.conf.pacnew to /etc/pacman.conf
12. [X] Run  `pacman-key --init; pacman-key --populate archlinux`
	to import the data required by pacman for package verification.
	See: https://www.archlinux.org/news/having-pacman-verify-packages
13. [X] Edit pacman.conf to temporarily turn off package signing
    Explanation: pacman will crash with package signing without upgrading an (not yet known) library with
    this error: `pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno`
    [[file://ssh:root@50.115.167.172:/etc/pacman.conf]]
14. [X] Add [openvz-tdw] repository /etc/pacman.conf
    [[file://ssh:root@50.115.167.172:/etc/pacman.conf]]
    #+begin_src sh
[openvz-tdw]
Server = http://packages.shilohsystem.com/openvz-tdw/$arch
    #+end_src
15. [X] Run `pacman --sync --refresh` again to refresh package lists
16. [X] Run `pacman --sync --force initscripts` to upgrade the initscripts package
    ( See https://www.archlinux.org/news/initscripts-update-manual-intervention-required/ for details )
17. [X] Run `pacman --sync --force filesystem` to upgrade the filesystem package
	( See http://www.archlinux.org/news/filesystem-upgrade-manual-intervention-required/ for details )
    NOTE: inaccurate error message => `error: extract: not overwriting dir with file var/run
          error: problem occurred while upgrading filesystem
          error: could not commit transaction
          error: failed to commit transaction (transaction aborted)
          Errors occurred, no packages were upgraded.`
	  In fact, the package was upgraded, which can be shown with pacman -Q filesystem

    NOTE: pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno
18. [X] Run `pacman --sync --force krb5`
19. [X] Read [[https://wiki.archlinux.org/index.php/DeveloperWiki:usrlib]]un
20. [X] Run `pacman -Sd binutils gcc-libs`
21. [X] Run `pacman -Syu --ignore glibc`
    - :: Replace libusb with core/libusbx? [Y/n]
    - :: Replace mailx with core/heirloom-mailx? [Y/n]
    - :: Replace procps with core/procps-ng? [Y/n]
    - :: Replace sqlite3 with extra/sqlite? [Y/n]
    error: failed to commit transaction (conflicting files)
    glibc: /lib exists in filesystem
22. [X] Run `pacman --sync util-linux`
23. [X] Run `pacman --sync --sysupgrade`
24. [X] Run `pacman --sync inetutils`
25. [X] Run `pacman --sync base-devel sudo emacs-nox rsync git`
26. [X] Run `adduser NEWUSER`
27. [X] Reboot
* Wednesday July 18, 2012)
** Well documented install 15:43
1. [X] Install Arch Linux at 15:45 ([[http://manage.virpus.com/login.php]])
2. [X] Set root password
3. [X] To facilitate upgrading glibc 2.15, add [openvz-glibc-2.15-tdw] repository to [[/etc/pacman.conf]]
   [[file://ssh:root@troywill.com:/etc/pacman.conf]]
   #+begin_src sh
   [openvz-glibc-2.15-tdw]
   Server = http://packages.shilohsystem.com/openvz-tdw/i686
   #+end_src
4. [X] Run `pacman --sync --refresh` to refresh package lists
5. [X] Run "pacman --sync --force pacman" to upgrade pacman
   - Explanation: pacman requires glibc 2.15, which will trigger a file conflict warning. Thus we use the --force flag.
   - Targets (19): linux-api-headers-3.4.4-1  glibc-2.15-20120425  xz-5.0.4-1  libarchive-3.0.4-1  run-parts-4.3.2-1  ca-certificates-20120623-1  
              libssh2-1.4.2-1  curl-7.26.0-1  pth-2.0.7-4  libksba-1.2.0-1  libassuan-2.0.3-1  pinentry-0.8.1-4  libsasl-2.1.23-9  
              libldap-2.4.31-4  dirmngr-1.1.0-4  gnupg-2.0.19-2  gpgme-1.3.1-4  archlinux-keyring-20120622-1  pacman-4.0.3-3  
6. [X] Run "pacman-db-upgrade" to update the pacman database format
7. [X] Copy /etc/pacman.conf.pacnew to /etc/pacman.conf
8. [X] Run  `pacman-key --init; pacman-key --populate archlinux`
       to import the data required by pacman for package verification.
       See: https://www.archlinux.org/news/having-pacman-verify-packages
9. [X] Edit pacman.conf to temporarily turn off package signing
   Explanation: pacman will crash with package signing without upgrading an (not yet known) library with
   this error: `pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno`
   [[file://ssh:root@troywill.com:/etc/pacman.conf]]
10. [X] Add [openvz-tdw] repository /etc/pacman.conf
    [[file://ssh:root@troywill.com:/etc/pacman.conf]]
    #+begin_src sh
[openvz-tdw]
Server = http://packages.shilohsystem.com/openvz-tdw/$arch
    #+end_src
11. [X] Run `pacman --sync --refresh` again to refresh package lists
12. [X] Run `pacman --sync --force initscripts` to upgrade the initscripts package
    ( See https://www.archlinux.org/news/initscripts-update-manual-intervention-required/ for details )
13. [X] Run `pacman --sync --force filesystem` to upgrade the filesystem package
	( See http://www.archlinux.org/news/filesystem-upgrade-manual-intervention-required/ for details )
    NOTE: inaccurate error message => `error: extract: not overwriting dir with file var/run
          error: problem occurred while upgrading filesystem
          error: could not commit transaction
          error: failed to commit transaction (transaction aborted)
          Errors occurred, no packages were upgraded.`
	  In fact, the package was upgraded, which can be shown with pacman -Q filesystem

    NOTE: pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno
14. [X] Run `pacman --sync --force krb5`
15. [ ] Run "pacman --sync --sysupgrade" to upgrade the system
    - :: Replace libusb with core/libusbx? [Y/n]
    - :: Replace mailx with core/heirloom-mailx? [Y/n]
    - :: Replace procps with core/procps-ng? [Y/n]
    - :: Replace sqlite3 with extra/sqlite? [Y/n]
   error: failed to commit transaction (conflicting files)
   glibc: /lib exists in filesystem
   Read [[https://wiki.archlinux.org/index.php/DeveloperWiki:usrlib]]
16. [X] Run `pacman -Sd binutils gcc-libs`
17. [X] Run `pacman -Syu --ignore glibc`
18. [X] Run `pacman --sync util-linux`
19. [ ] Run `pacman --sync --sysupgrade`
20. [ ] Run `pacman --sync inetutils`
21. [ ] Reboot    
** Failed Attempt 3 Step by Step (Wednesday July 18, 2012) [6/18]
1. [X] Install Arch Linux ([[http://manage.virpus.com/login.php]])
2. [X] Set root password
3. [X] (Optional) Edit /etc/pacman.d/mirrorlist
   [[file://ssh:root@troywill.com:/etc/pacman.d/mirrorlist]]
4. [X] Run "pacman -Sy" as root to refresh package lists
      #+begin_src sh
      pacman -Sy
      #+end_src
5. [X] Run "pacman -S --force initscripts" to upgrade the initscripts package
   ( See https://www.archlinux.org/news/initscripts-update-manual-intervention-required/ for details )
   #+begin_src sh
   pacman -S --force initscripts
   #+end_src
6. [ ] Run "pacman -S --force filesystem" to upgrade the filesystem package
       ( See http://www.archlinux.org/news/filesystem-upgrade-manual-intervention-required/ for details )
   #+begin_src sh 
   pacman -S --force filesystem
   #+end_src
   NOTE: inaccurate error message => `error: extract: not overwriting dir with file var/run
        error: problem occurred while upgrading filesystem
        error: could not commit transaction
        error: failed to commit transaction (transaction aborted)
        Errors occurred, no packages were upgraded.`
	  
	In fact, the package was upgraded

   NOTE: pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno
7. [ ] Run "pacman --sync makedev"
   I did this at 13:43. When rebooting I got `PTY allocation request failed on channel 0`
7. [ ] Run "pacman -S --force pacman" to upgrade pacman
   #+begin_src sh 
pacman -S --force pacman   
   #+end_src
8. [ ] Run "pacman-db-upgrade" to update the pacman database format
   #+begin_src sh 
pacman-db-upgrade
   #+end_src
9. [ ] Copy /etc/pacman.conf.pacnew to /etc/pacman.conf
   #+begin_src sh 
cp /etc/pacman.conf.pacnew /etc/pacman.conf
   #+end_src
10. [ ] Run  `pacman-key --init; pacman-key --populate archlinux`
	to import the data required by pacman for package verification.
	See: https://www.archlinux.org/news/having-pacman-verify-packages
    #+begin_src sh 
 pacman-key --init
 pacman-key --populate archlinux
    #+end_src
11. [X] To facilitate upgrading glibc, add [openvz-tdw] repository to [[/etc/pacman.conf]]
    [[file://ssh:root@troywill.com:/etc/pacman.conf]]
    #+begin_src sh 
 [openvz-tdw]
 Server = http://packages.shilohsystem.com/openvz-tdw/i686
 # Server = http://packages.shilohsystem.com/openvz-tdw/x86_64
    #+end_src
12. [ ] Edit pacman.conf to temporarily turn off package signing
    
    Explanation: pacman will crash with package signing without upgrading an (not yet known) library with
    this error: `pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno`
    [[file://ssh:root@troywill.com:/etc/pacman.conf]]
   #+begin_src sh
[core]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist

[extra]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist

#[community-testing]
#SigLevel = PackageRequired
#Include = /etc/pacman.d/mirrorlist

[community]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist
#+end_src
13. [ ] Add [openvz-tdw] repository again to the new /etc/pacman.conf as in step 3
      [[file://ssh:root@troywill.com:/etc/pacman.conf]]
      #+begin_src sh 
  [openvz-tdw]
  Server = http://packages.shilohsystem.com/openvz-tdw/$arch
      #+end_src
14. [ ] Run "pacman -Sy" again to refresh package lists
    #+begin_src sh
pacman -Sy
    #+end_src
15. [ ] Run "pacman -S --force krb5
16. [ ] Run "pacman -Su" to upgrade the system
    #+begin_src sh 
pacman -Su
    #+end_src
17. [ ] Run "pacman -S inetutils"
    #+begin_src sh 
pacman -S inetutils
    #+end_src
18. [ ] Reboot    

* FAILED Step by Step (Wednesday July 18, 2012 i686) [0/18]
** Purchase account July 18, 2012 FAIL[3/3]
1. [X] View [[http://virpus.com]]
2. [X] Choose "Learn More" button for Xen vps hosting [[http://virpus.com/budget-vps/xen.html]]
   ( RAM = 256 MB, SWAP = 512 MB, Bandwidth = 1000 GB, Annual $5.95/mo )
3. [X] Choose "order now"
| Option        | Value                    | Note                                           |
|---------------+--------------------------+------------------------------------------------|
| Hostname      | usahealthscience.com     |                                                |
| NS1 Prefix    | ns1.usahealthscience.com |                                                |
| Location      | Los Angeles              |                                                |
| OS            | CentOS                   | Plenty more available within VPS control panel |
| Control Panel | No, thanks               | DirectAdmin $5.00, cPanel $10.00               |
| Management    | Unmanaged                | Fully Managed $10.00 USD                       |

4. [ ] "Add to Cart"
** Install Arch Linux  
1. [ ] Install Arch Linux ([[http://manage.virpus.com/login.php]])
   "SolusVM does not officially support Arch, hence you will need to manually configure the network: /etc/rc.conf and /etc/resolv.conf"
2. [ ] Set root password
3. [ ] To facilitate upgrading glibc, add [openvz-tdw] repository to [[/etc/pacman.conf]]
   [[file://ssh:root@troywill.com:/etc/pacman.conf]]
   #+begin_src sh 
[openvz-tdw]
Server = http://packages.shilohsystem.com/openvz-tdw/i686
# Server = http://packages.shilohsystem.com/openvz-tdw/x86_64
   #+end_src
4. [ ] (Optional) Edit /etc/pacman.d/mirrorlist
   [[file://ssh:root@troywill.com:/etc/pacman.d/mirrorlist]]
5. [ ] Run "pacman -Sy" as root to refresh package lists
   #+begin_src sh
pacman -Sy
   #+end_src
6. [ ] Run "pacman -S --force pacman" to upgrade pacman
   #+begin_src sh 
pacman -S --force pacman   
   #+end_src
7. [ ] Run "pacman-db-upgrade" to update the pacman database format
   #+begin_src sh 
pacman-db-upgrade
   #+end_src
8. [ ] Copy /etc/pacman.conf.pacnew to /etc/pacman.conf
   #+begin_src sh 
cp /etc/pacman.conf.pacnew /etc/pacman.conf
   #+end_src
9. [ ] Run  `pacman-key --init; pacman-key --populate archlinux`
       to import the data required by pacman for package verification.
       See: https://www.archlinux.org/news/having-pacman-verify-packages
   #+begin_src sh 
pacman-key --init
pacman-key --populate archlinux
   #+end_src
10. [ ] Edit pacman.conf to temporarily turn off package signing
    
    Explanation: pacman will crash with package signing without upgrading an (not yet known) library with
    this error: `pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno`
    [[file://ssh:root@troywill.com:/etc/pacman.conf]]
   #+begin_src sh
[core]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist

[extra]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist

#[community-testing]
#SigLevel = PackageRequired
#Include = /etc/pacman.d/mirrorlist

[community]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist
   #+end_src
11. [ ] Add [openvz-tdw] repository again to the new /etc/pacman.conf as in step 3
      [[file://ssh:root@troywill.com:/etc/pacman.conf]]
      #+begin_src sh 
  [openvz-tdw]
  Server = http://packages.shilohsystem.com/openvz-tdw/$arch
      #+end_src
12. [ ] Run "pacman -Sy" again to refresh package lists
    #+begin_src sh
pacman -Sy
    #+end_src
13. [ ] Run "pacman -S --force initscripts" to upgrade the initscripts package
    ( See https://www.archlinux.org/news/initscripts-update-manual-intervention-required/ for details )
    #+begin_src sh 
pacman -S --force initscripts
    #+end_src
14. [ ] Run "pacman -S --force filesystem" to upgrade the filesystem package
	( See http://www.archlinux.org/news/filesystem-upgrade-manual-intervention-required/ for details )
    #+begin_src sh 
pacman -S --force filesystem
    #+end_src
    NOTE: inaccurate error message => `error: extract: not overwriting dir with file var/run
          error: problem occurred while upgrading filesystem
          error: could not commit transaction
          error: failed to commit transaction (transaction aborted)
          Errors occurred, no packages were upgraded.`
	  
	  In fact, the package was upgraded

    NOTE: pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno
15. [ ] Run "pacman -S --force krb5
16. [ ] Run "pacman -Su" to upgrade the system
    #+begin_src sh 
pacman -Su
    #+end_src
17. [ ] Run "pacman -S inetutils"
    #+begin_src sh 
pacman -S inetutils
    #+end_src
18. [ ] Reboot    

* Step by Step (successful Friday June 15, 2012 i686) [0/18]
1. [ ] Install Arch Linux ([[http://manage.virpus.com/login.php]])
2. [ ] Set root password
3. [ ] To facilitate upgrading glibc, add [openvz-tdw] repository to [[/etc/pacman.conf]]
   [[file://ssh:root@troywill.com:/etc/pacman.conf]]
   #+begin_src 
[openvz-tdw]
Server = http://packages.shilohsystem.com/openvz-tdw/i686
# Server = http://packages.shilohsystem.com/openvz-tdw/x86_64
   #+end_src
4. [ ] (Optional) Edit /etc/pacman.d/mirrorlist
   [[file://ssh:root@troywill.com:/etc/pacman.d/mirrorlist]]
5. [ ] Run "pacman -Sy" as root to refresh package lists
   #+begin_src sh
pacman -Sy
   #+end_src
6. [ ] Run "pacman -S --force pacman" to upgrade pacman
   #+begin_src 
pacman -S --force pacman   
   #+end_src
7. [ ] Run "pacman-db-upgrade" to update the pacman database format
   #+begin_src 
pacman-db-upgrade
   #+end_src
8. [ ] Copy /etc/pacman.conf.pacnew to /etc/pacman.conf
   #+begin_src 
cp /etc/pacman.conf.pacnew /etc/pacman.conf
   #+end_src
9. [ ] Run  `pacman-key --init; pacman-key --populate archlinux`
       to import the data required by pacman for package verification.
       See: https://www.archlinux.org/news/having-pacman-verify-packages
   #+begin_src 
pacman-key --init
pacman-key --populate archlinux
   #+end_src
10. [ ] Edit pacman.conf to temporarily turn off package signing
    
    Explanation: pacman will crash with package signing without upgrading an (not yet known) library with
    this error: `pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno`
    [[file://ssh:root@troywill.com:/etc/pacman.conf]]
   #+begin_src
[core]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist

[extra]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist

#[community-testing]
#SigLevel = PackageRequired
#Include = /etc/pacman.d/mirrorlist

[community]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist
   #+end_src
11. [ ] Add [openvz-tdw] repository again to the new /etc/pacman.conf as in step 3
      [[file://ssh:root@troywill.com:/etc/pacman.conf]]
      #+begin_src 
  [openvz-tdw]
  Server = http://packages.shilohsystem.com/openvz-tdw/$arch
      #+end_src
12. [ ] Run "pacman -Sy" again to refresh package lists
    #+begin_src sh
pacman -Sy
    #+end_src
13. [ ] Run "pacman -S --force initscripts" to upgrade the initscripts package
    ( See https://www.archlinux.org/news/initscripts-update-manual-intervention-required/ for details )
    #+begin_src 
pacman -S --force initscripts
    #+end_src
14. [ ] Run "pacman -S --force filesystem" to upgrade the filesystem package
	( See http://www.archlinux.org/news/filesystem-upgrade-manual-intervention-required/ for details )
    #+begin_src 
pacman -S --force filesystem
    #+end_src
    NOTE: inaccurate error message => `error: extract: not overwriting dir with file var/run
          error: problem occurred while upgrading filesystem
          error: could not commit transaction
          error: failed to commit transaction (transaction aborted)
          Errors occurred, no packages were upgraded.`
	  
	  In fact, the package was upgraded

    NOTE: pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno
15. [ ] Run "pacman -S --force krb5
16. [ ] Run "pacman -Su" to upgrade the system
    #+begin_src 
pacman -Su
    #+end_src
17. [ ] Run "pacman -S inetutils"
    #+begin_src 
pacman -S inetutils
    #+end_src
18. [ ] Reboot    
** Attempt 4 at 14:08 ( This step succeeded )
1. [X] Install Arch Linux at 14:09 ([[http://manage.virpus.com/login.php]])
2. [X] Set root password
3. [X] To facilitate upgrading glibc 2.15, add [openvz-glibc-2.15-tdw] repository to [[/etc/pacman.conf]]
   [[file://ssh:root@troywill.com:/etc/pacman.conf]]
   #+begin_src 
   [openvz-glibc-2.15-tdw]
   Server = http://packages.shilohsystem.com/openvz-tdw/i686
   #+end_src
4. [X] Run "pacman -Sy" or "pacman --sync --refresh" to refresh package lists
   #+begin_src sh
   pacman -Sy
   #+end_src
5. [X] Run "pacman -S --force pacman" to upgrade pacman
6. [X] Run "pacman-db-upgrade" to update the pacman database format
   #+begin_src 
pacman-db-upgrade
   #+end_src
7. [X] Copy /etc/pacman.conf.pacnew to /etc/pacman.conf
   #+begin_src 
   cp /etc/pacman.conf.pacnew /etc/pacman.conf
   #+end_src
8. [X] Run  `pacman-key --init; pacman-key --populate archlinux`
       to import the data required by pacman for package verification.
       See: https://www.archlinux.org/news/having-pacman-verify-packages
   #+begin_src 
   pacman-key --init
   pacman-key --populate archlinux
   #+end_src
9. [ ] Edit pacman.conf to temporarily turn off package signing
   Explanation: pacman will crash with package signing without upgrading an (not yet known) library with
   this error: `pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno`
   [[file://ssh:root@troywill.com:/etc/pacman.conf]]
10. [X] Add [openvz-tdw] repository /etc/pacman.conf
    [[file://ssh:root@troywill.com:/etc/pacman.conf]]
      #+begin_src 
  [openvz-tdw]
  Server = http://packages.shilohsystem.com/openvz-tdw/$arch
      #+end_src
11. [X] Run "pacman -Sy" again to refresh package lists
    #+begin_src sh
pacman -Sy
    #+end_src
12. [X] Run "pacman -S --force initscripts" to upgrade the initscripts package
    ( See https://www.archlinux.org/news/initscripts-update-manual-intervention-required/ for details )
    #+begin_src 
pacman -S --force initscripts
    #+end_src
13. [X] Run "pacman -S --force filesystem" to upgrade the filesystem package
	( See http://www.archlinux.org/news/filesystem-upgrade-manual-intervention-required/ for details )
    #+begin_src 
pacman -S --force filesystem
    #+end_src
    NOTE: inaccurate error message => `error: extract: not overwriting dir with file var/run
          error: problem occurred while upgrading filesystem
          error: could not commit transaction
          error: failed to commit transaction (transaction aborted)
          Errors occurred, no packages were upgraded.`
	  
	  In fact, the package was upgraded

    NOTE: pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno
14. [ ] Run "pacman -S --force krb5
15. [ ] Run "pacman -Su" to upgrade the system
    #+begin_src 
    pacman -Su
    #+end_src
   error: failed to commit transaction (conflicting files)
   glibc: /lib exists in filesystem
   Read [[https://wiki.archlinux.org/index.php/DeveloperWiki:usrlib]]
16. [X] pacman -Sd binutils gcc gcc-libs
15. [ ] Run "pacman -Su" to upgrade the system
    error: failed to commit transaction (conflicting files)
    glibc: /lib exists in filesystem
1. [ ] 
17. [ ] Run "pacman -S inetutils"
    #+begin_src 
pacman -S inetutils
    #+end_src
18. [ ] Reboot    
** Failed Attempt 3 Step by Step (Wednesday July 18, 2012) [6/18]
1. [X] Install Arch Linux ([[http://manage.virpus.com/login.php]])
2. [X] Set root password
3. [X] (Optional) Edit /etc/pacman.d/mirrorlist
   [[file://ssh:root@troywill.com:/etc/pacman.d/mirrorlist]]
4. [X] Run "pacman -Sy" as root to refresh package lists
      #+begin_src sh
      pacman -Sy
      #+end_src
5. [X] Run "pacman -S --force initscripts" to upgrade the initscripts package
   ( See https://www.archlinux.org/news/initscripts-update-manual-intervention-required/ for details )
   #+begin_src 
   pacman -S --force initscripts
   #+end_src
6. [ ] Run "pacman -S --force filesystem" to upgrade the filesystem package
       ( See http://www.archlinux.org/news/filesystem-upgrade-manual-intervention-required/ for details )
   #+begin_src 
   pacman -S --force filesystem
   #+end_src
   NOTE: inaccurate error message => `error: extract: not overwriting dir with file var/run
        error: problem occurred while upgrading filesystem
        error: could not commit transaction
        error: failed to commit transaction (transaction aborted)
        Errors occurred, no packages were upgraded.`
	  
	In fact, the package was upgraded

   NOTE: pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno
7. [ ] Run "pacman --sync makedev"
   I did this at 13:43. When rebooting I got `PTY allocation request failed on channel 0`
7. [ ] Run "pacman -S --force pacman" to upgrade pacman
   #+begin_src 
pacman -S --force pacman   
   #+end_src
8. [ ] Run "pacman-db-upgrade" to update the pacman database format
   #+begin_src 
pacman-db-upgrade
   #+end_src
9. [ ] Copy /etc/pacman.conf.pacnew to /etc/pacman.conf
   #+begin_src 
cp /etc/pacman.conf.pacnew /etc/pacman.conf
   #+end_src
10. [ ] Run  `pacman-key --init; pacman-key --populate archlinux`
	to import the data required by pacman for package verification.
	See: https://www.archlinux.org/news/having-pacman-verify-packages
    #+begin_src 
 pacman-key --init
 pacman-key --populate archlinux
    #+end_src
11. [X] To facilitate upgrading glibc, add [openvz-tdw] repository to [[/etc/pacman.conf]]
    [[file://ssh:root@troywill.com:/etc/pacman.conf]]
    #+begin_src 
 [openvz-tdw]
 Server = http://packages.shilohsystem.com/openvz-tdw/i686
 # Server = http://packages.shilohsystem.com/openvz-tdw/x86_64
    #+end_src
12. [ ] Edit pacman.conf to temporarily turn off package signing
    
    Explanation: pacman will crash with package signing without upgrading an (not yet known) library with
    this error: `pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno`
    [[file://ssh:root@troywill.com:/etc/pacman.conf]]
   #+begin_src
[core]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist

[extra]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist

#[community-testing]
#SigLevel = PackageRequired
#Include = /etc/pacman.d/mirrorlist

[community]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist
#+end_src
13. [ ] Add [openvz-tdw] repository again to the new /etc/pacman.conf as in step 3
      [[file://ssh:root@troywill.com:/etc/pacman.conf]]
      #+begin_src 
  [openvz-tdw]
  Server = http://packages.shilohsystem.com/openvz-tdw/$arch
      #+end_src
14. [ ] Run "pacman -Sy" again to refresh package lists
    #+begin_src sh
pacman -Sy
    #+end_src
15. [ ] Run "pacman -S --force krb5
16. [ ] Run "pacman -Su" to upgrade the system
    #+begin_src 
pacman -Su
    #+end_src
17. [ ] Run "pacman -S inetutils"
    #+begin_src 
pacman -S inetutils
    #+end_src
18. [ ] Reboot    

* FAILED Step by Step (Wednesday July 18, 2012 i686) [0/18]
** Purchase account [3/3]
1. [X] View [[http://virpus.com]]
2. [X] Choose "Learn More" button for Xen vps hosting [[http://virpus.com/budget-vps/xen.html]]
   ( RAM = 256 MB, SWAP = 512 MB, Bandwidth = 1000 GB, Annual $5.95/mo )
3. [X] Choose "order now"
| Option        | Value                    | Note                                           |
|---------------+--------------------------+------------------------------------------------|
| Hostname      | usahealthscience.com     |                                                |
| NS1 Prefix    | ns1.usahealthscience.com |                                                |
| Location      | Los Angeles              |                                                |
| OS            | CentOS                   | Plenty more available within VPS control panel |
| Control Panel | No, thanks               | DirectAdmin $5.00, cPanel $10.00               |
| Management    | Unmanaged                | Fully Managed $10.00 USD                       |

4. [ ] "Add to Cart"

** Install Arch Linux  
1. [ ] Install Arch Linux ([[http://manage.virpus.com/login.php]])
   "SolusVM does not officially support Arch, hence you will need to manually configure the network: /etc/rc.conf and /etc/resolv.conf"
2. [ ] Set root password
3. [ ] To facilitate upgrading glibc, add [openvz-tdw] repository to [[/etc/pacman.conf]]
   [[file://ssh:root@troywill.com:/etc/pacman.conf]]
   #+begin_src 
[openvz-tdw]
Server = http://packages.shilohsystem.com/openvz-tdw/i686
# Server = http://packages.shilohsystem.com/openvz-tdw/x86_64
   #+end_src
4. [ ] (Optional) Edit /etc/pacman.d/mirrorlist
   [[file://ssh:root@troywill.com:/etc/pacman.d/mirrorlist]]
5. [ ] Run "pacman -Sy" as root to refresh package lists
   #+begin_src sh
pacman -Sy
   #+end_src
6. [ ] Run "pacman -S --force pacman" to upgrade pacman
   #+begin_src 
pacman -S --force pacman   
   #+end_src
7. [ ] Run "pacman-db-upgrade" to update the pacman database format
   #+begin_src 
pacman-db-upgrade
   #+end_src
8. [ ] Copy /etc/pacman.conf.pacnew to /etc/pacman.conf
   #+begin_src 
cp /etc/pacman.conf.pacnew /etc/pacman.conf
   #+end_src
9. [ ] Run  `pacman-key --init; pacman-key --populate archlinux`
       to import the data required by pacman for package verification.
       See: https://www.archlinux.org/news/having-pacman-verify-packages
   #+begin_src 
pacman-key --init
pacman-key --populate archlinux
   #+end_src
10. [ ] Edit pacman.conf to temporarily turn off package signing
    
    Explanation: pacman will crash with package signing without upgrading an (not yet known) library with
    this error: `pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno`
    [[file://ssh:root@troywill.com:/etc/pacman.conf]]
   #+begin_src
[core]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist

[extra]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist

#[community-testing]
#SigLevel = PackageRequired
#Include = /etc/pacman.d/mirrorlist

[community]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist
   #+end_src
11. [ ] Add [openvz-tdw] repository again to the new /etc/pacman.conf as in step 3
      [[file://ssh:root@troywill.com:/etc/pacman.conf]]
      #+begin_src 
  [openvz-tdw]
  Server = http://packages.shilohsystem.com/openvz-tdw/$arch
      #+end_src
12. [ ] Run "pacman -Sy" again to refresh package lists
    #+begin_src sh
pacman -Sy
    #+end_src
13. [ ] Run "pacman -S --force initscripts" to upgrade the initscripts package
    ( See https://www.archlinux.org/news/initscripts-update-manual-intervention-required/ for details )
    #+begin_src 
pacman -S --force initscripts
    #+end_src
14. [ ] Run "pacman -S --force filesystem" to upgrade the filesystem package
	( See http://www.archlinux.org/news/filesystem-upgrade-manual-intervention-required/ for details )
    #+begin_src 
pacman -S --force filesystem
    #+end_src
    NOTE: inaccurate error message => `error: extract: not overwriting dir with file var/run
          error: problem occurred while upgrading filesystem
          error: could not commit transaction
          error: failed to commit transaction (transaction aborted)
          Errors occurred, no packages were upgraded.`
	  
	  In fact, the package was upgraded

    NOTE: pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno
15. [ ] Run "pacman -S --force krb5
16. [ ] Run "pacman -Su" to upgrade the system
    #+begin_src 
pacman -Su
    #+end_src
17. [ ] Run "pacman -S inetutils"
    #+begin_src 
pacman -S inetutils
    #+end_src
18. [ ] Reboot    

* Step by Step (successful Friday June 15, 2012 i686) [0/18]
1. [ ] Install Arch Linux ([[http://manage.virpus.com/login.php]])
2. [ ] Set root password
3. [ ] To facilitate upgrading glibc, add [openvz-tdw] repository to [[/etc/pacman.conf]]
   [[file://ssh:root@troywill.com:/etc/pacman.conf]]
   #+begin_src 
[openvz-tdw]
Server = http://packages.shilohsystem.com/openvz-tdw/i686
# Server = http://packages.shilohsystem.com/openvz-tdw/x86_64
   #+end_src
4. [ ] (Optional) Edit /etc/pacman.d/mirrorlist
   [[file://ssh:root@troywill.com:/etc/pacman.d/mirrorlist]]
5. [ ] Run "pacman -Sy" as root to refresh package lists
   #+begin_src sh
pacman -Sy
   #+end_src
6. [ ] Run "pacman -S --force pacman" to upgrade pacman
   #+begin_src 
pacman -S --force pacman   
   #+end_src
7. [ ] Run "pacman-db-upgrade" to update the pacman database format
   #+begin_src 
pacman-db-upgrade
   #+end_src
8. [ ] Copy /etc/pacman.conf.pacnew to /etc/pacman.conf
   #+begin_src 
cp /etc/pacman.conf.pacnew /etc/pacman.conf
   #+end_src
9. [ ] Run  `pacman-key --init; pacman-key --populate archlinux`
       to import the data required by pacman for package verification.
       See: https://www.archlinux.org/news/having-pacman-verify-packages
   #+begin_src 
pacman-key --init
pacman-key --populate archlinux
   #+end_src
10. [ ] Edit pacman.conf to temporarily turn off package signing
    
    Explanation: pacman will crash with package signing without upgrading an (not yet known) library with
    this error: `pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno`
    [[file://ssh:root@troywill.com:/etc/pacman.conf]]
   #+begin_src
[core]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist

[extra]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist

#[community-testing]
#SigLevel = PackageRequired
#Include = /etc/pacman.d/mirrorlist

[community]
SigLevel = PackageRequired
SigLevel = Never
Include = /etc/pacman.d/mirrorlist
   #+end_src
11. [ ] Add [openvz-tdw] repository again to the new /etc/pacman.conf as in step 3
      [[file://ssh:root@troywill.com:/etc/pacman.conf]]
      #+begin_src 
  [openvz-tdw]
  Server = http://packages.shilohsystem.com/openvz-tdw/$arch
      #+end_src
12. [ ] Run "pacman -Sy" again to refresh package lists
    #+begin_src sh
pacman -Sy
    #+end_src
13. [ ] Run "pacman -S --force initscripts" to upgrade the initscripts package
    ( See https://www.archlinux.org/news/initscripts-update-manual-intervention-required/ for details )
    #+begin_src 
pacman -S --force initscripts
    #+end_src
14. [ ] Run "pacman -S --force filesystem" to upgrade the filesystem package
	( See http://www.archlinux.org/news/filesystem-upgrade-manual-intervention-required/ for details )
    #+begin_src 
pacman -S --force filesystem
    #+end_src
    NOTE: inaccurate error message => `error: extract: not overwriting dir with file var/run
          error: problem occurred while upgrading filesystem
          error: could not commit transaction
          error: failed to commit transaction (transaction aborted)
          Errors occurred, no packages were upgraded.`
	  
	  In fact, the package was upgraded

    NOTE: pacman: symbol lookup error: /usr/lib/libgpgme.so.11: undefined symbol: gpg_err_set_errno
15. [ ] Run "pacman -S --force krb5
16. [ ] Run "pacman -Su" to upgrade the system
    #+begin_src 
pacman -Su
    #+end_src
17. [ ] Run "pacman -S inetutils"
    #+begin_src 
pacman -S inetutils
    #+end_src
18. [ ] Reboot    
* Upgrading glibc
** Primary documentation
1. [[http://wiki.openvz.org/Archlinux_Template_creation][http://wiki.openvz.org/Archlinux_Template_creation]]
2. [[https://wiki.archlinux.org/index.php/VPS#Old_kernel_and_a_broken_system_with_OpenVZ][https://wiki.archlinux.org/index.php/VPS#Old_kernel_and_a_broken_system_with_OpenVZ]]
3. [[https://bbs.archlinux.org/viewtopic.php?pid=1044707][https://bbs.archlinux.org/viewtopic.php?pid=1044707]]
* Developer Notes
** How to make a glibc package
1. [X] install abs (pacman --sync abs)
2. [X] run abs ( /usr/bin/abs )
3. [X] copy /var/abs/core/glibc to a build directory
4. [X] change pkgrel variable in PKGBUILD
5. [X] change --enable-kernel flag in PKGBUILD to 2.6.18
6. [ ] run makepkg
** How to set up a custom repository
[openvz-tdw]
Server = http://packages.shilohsystem.com/openvz-tdw
mkdir /srv/http/packages/openvz-tdw
#+begin_src sh
#!/bin/sh
PATH_TO_DB="/srv/http/packages/openvz-tdw/openvz-tdw.db.tar.gz"
PACKAGE="/srv/http/packages/openvz-tdw/glibc-2.15-100-i686.pkg.tar.xz"
repo-add ${PATH_TO_DB} ${PACKAGE}
#+end_src
==> Adding package '/srv/http/packages/openvz-tdw/glibc-2.15-100-i686.pkg.tar.xz'
  -> Computing checksums...
  -> Creating 'desc' db entry...
  -> Creating 'depends' db entry...
==> Creating updated database file '/srv/http/packages/openvz-tdw/openvz-tdw.db.tar.gz'

1. repo-add /srv/http/packages/openvz/glibc-vps/i686/glibc-openvz.db.tar.gz i686/glibc-2.15-10-i686.pkg.tar.xz
